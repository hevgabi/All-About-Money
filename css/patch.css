/* ============================================================
   css/patch.css — UI Fix Patch
   TASK 1: Budget page overlap fix
   TASK 2: Wants page horizontal scroll fix
   ============================================================ */

/* ──────────────────────────────────────────────────────────────
   TASK 1 — BUDGET PAGE OVERLAP FIX
   Root cause: hamburger button (position:fixed; top:13px; height:42px)
   sits on top of .page-header which on mobile only has padding-top:20px,
   causing the page title + tabs to be covered by the hamburger.
   Fix: on mobile, push page-header down to clear the hamburger.
   ────────────────────────────────────────────────────────────── */

@media (max-width: 768px) {
  /* Clear the 42px hamburger (top:13px → bottom edge at ~68px) */
  .page-header {
    padding-top: 72px !important;
  }

  /* Keep page-body safe-padded from bottom-nav (62px) + a little breathing room */
  .page-body {
    padding-bottom: 80px !important;
  }

  /* Tabs: allow them to wrap on very narrow screens so they never overflow */
  .tabs {
    flex-wrap: wrap;
  }
  .tab-btn {
    flex: 1 1 auto;
    min-width: 80px;
    white-space: nowrap;
  }

  /* PayLater section header row: stack on tight screens */
  #paylater-budget > div:first-child {
    flex-wrap: wrap;
    gap: 10px;
  }

  /* inst-grid: single column on mobile to prevent overflow */
  .inst-grid {
    grid-template-columns: 1fr !important;
  }

  /* inst-card: make sure content doesn't overflow */
  .inst-card {
    min-width: 0;
    max-width: 100%;
  }
  .inst-amounts {
    grid-template-columns: 1fr 1fr;
  }
}

/* Desktop: ensure the page-header is not clipped or overlapped.
   On desktop the hamburger is hidden, so just enforce normal padding. */
@media (min-width: 769px) {
  .page-header {
    padding-top: 32px !important;
  }
}

/* ──────────────────────────────────────────────────────────────
   TASK 2 — WANTS PAGE HORIZONTAL SCROLL FIX
   Root causes:
   1. .want-item uses display:flex with no wrapping → action buttons
      overflow the row when 4 buttons are present (Nabili, PayLater, Edit, Delete)
   2. .want-price has margin-right:auto which pushes .want-actions off-screen
      on narrow viewports with long price strings
   3. .want-info has no min-width:0, so it doesn't shrink properly in flex
   4. No overflow-x:hidden on .main-content causes the page to widen
   ────────────────────────────────────────────────────────────── */

/* Prevent the main content area from causing horizontal scroll */
.main-content {
  overflow-x: hidden;
  max-width: 100%;
}

/* Wants list container: never wider than its parent */
.wants-list {
  width: 100%;
  max-width: 100%;
}

/* want-item: allow row to wrap on narrow screens */
.want-item {
  flex-wrap: wrap;
  min-width: 0;
  max-width: 100%;
  box-sizing: border-box;
}

/* want-info: must be able to shrink, and long names must not overflow */
.want-info {
  min-width: 0;
  flex: 1 1 120px;   /* can shrink down to 120px */
  overflow: hidden;
}
.want-name {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* want-price: don't push actions off screen; let it wrap */
.want-price {
  flex-shrink: 0;
  white-space: nowrap;
}

/* want-actions: allow wrapping so buttons stack instead of overflowing */
.want-actions {
  flex-wrap: wrap;
  flex-shrink: 0;
}

/* On very narrow screens: want-item becomes a two-row layout */
@media (max-width: 520px) {
  .want-item {
    gap: 10px;
  }

  /* Row 1: priority + name + price */
  .want-priority {
    flex-shrink: 0;
  }
  .want-info {
    flex: 1 1 80px;
  }
  .want-price {
    margin-right: 0; /* drop the auto margin so price doesn't push to extremes */
  }

  /* Row 2: action buttons, full width */
  .want-actions {
    width: 100%;
    flex-wrap: wrap;
    gap: 6px;
    padding-left: 48px; /* align under the info text (32px priority + 16px gap) */
  }

  /* Buttons: allow them to be smaller on tight screens */
  .want-actions .btn-sm {
    padding: 5px 10px;
    font-size: 0.75rem;
    white-space: nowrap;
  }
}

/* Form rows on Wants page: wrap on small screens (same fix as budget/others) */
@media (max-width: 768px) {
  .form-row {
    display: flex !important;
    flex-direction: column !important;
    gap: 0 !important;
  }
  .form-row .form-group {
    min-width: 0;
    width: 100%;
  }

  /* Ensure form inputs never overflow their container */
  .form-control,
  input.form-control,
  select.form-control {
    max-width: 100% !important;
    box-sizing: border-box;
  }
}

/* Global safety net: no element should cause horizontal scroll on body */
@media (max-width: 768px) {
  .app-layout {
    max-width: 100vw;
    overflow-x: hidden;
  }
  .page-body {
    max-width: 100%;
    box-sizing: border-box;
  }
}

/* ── Wallet-to-Wallet Transfer — new styles ─────────────────── */
:root {
  --transfer: #a78bfa;   /* purple accent for transfers */
}

/* Transfer type-toggle button */
.type-toggle button.active-transfer {
  background: #a78bfa22;
  color: var(--transfer);
  border-color: var(--transfer);
}

/* Transfer badge in transaction list */
.badge-transfer {
  background: #a78bfa22;
  color: var(--transfer);
}

/* Transfer amount cell */
.td-transfer {
  color: var(--transfer);
  font-weight: 600;
}

/* Ensure type-toggle wraps cleanly on mobile with 3 buttons */
.type-toggle {
  flex-wrap: wrap;
}
/* ── Usage Guide (Feature 2) ─────────────────────────────────── */
.usage-guide {
  background: var(--bg2, #1a1a2e);
  border: 1px solid rgba(0,245,196,0.15);
  border-radius: 10px;
  padding: 12px 16px;
  margin-bottom: 18px;
  font-size: 0.8rem;
  color: var(--text2, #aaa);
}
.usage-guide summary {
  cursor: pointer;
  font-weight: 600;
  color: var(--accent, #00F5C4);
  font-size: 0.82rem;
  user-select: none;
  list-style: none;
  display: flex;
  align-items: center;
  gap: 6px;
}
.usage-guide summary::-webkit-details-marker { display: none; }
.usage-guide summary::before {
  content: '▸';
  font-size: 0.7rem;
  transition: transform 0.2s;
}
.usage-guide[open] summary::before { transform: rotate(90deg); }
.usage-guide-body {
  margin-top: 10px;
  line-height: 1.6;
}
.usage-guide-body p { margin: 4px 0; }
.usage-guide-body strong { color: var(--text1, #fff); font-weight: 600; }